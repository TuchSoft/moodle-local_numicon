{"version":3,"file":"index.min.js","sources":["../src/index.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Section number icon filter - A simple JS based filter to turn number into icon in section,course and activity title\n *\n * #package local_numicon\n * @copyright 2025 TuchSoft <https://tuchsoft.com>\n * @author Mattia Bonzi <mattia@tuchsoft.com>\n * @see https://tuchsoft.com/plugin/moodle/local_numicon <Documentations and tutorials>\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery'], function($) {\n    return {\n        init: function (regex, breadcrumb = 'hide', section = true, activity = false ) {\n            const addNumIcon = function(classes) {\n                const breadcrumbClass = '.breadcrumb-item > a, .breadcrumb-item > span';\n                if (breadcrumb == 'icon') {\n                    classes += ','+breadcrumbClass;\n                }\n\n                document.querySelectorAll(classes).forEach(el => {\n                    const match = el.innerText.trim().match(regex);\n                    console.log(match);\n                    if (match) {\n                        let icon = (match.groups && match.groups.icon ? match.groups.icon : match[1]).trim();\n                        let title = (match.groups && match.groups.title ? match.groups.title : match[2]).trim();\n                        let iconclass = 'numicon-num';\n\n                        if (isUnicodeEmoji(icon)) {\n                            iconclass += ' numicon-emoji';\n                        }\n\n                        el.innerHTML = `<div class=\"text-center numicon-container\">\n                                            <div class=\"numicon-icon\">\n                                                <span class=\"${iconclass}\">${icon}</span>\n                                            </div>\n                                        </div> \n                                        ${title}`;\n                    }\n                });\n\n                //manage breadcrums\n                if (breadcrumb == 'hide') {\n                    document.querySelectorAll(breadcrumbClass).forEach(el => {\n                        const match = el.innerText.trim().match(regex);\n                        if (match) {\n                            el.innerText = match[2].trim();\n                        }\n                    });\n                }\n            };\n\n            const isUnicodeEmoji = function(char) {\n                const codePoint = char.codePointAt(0);\n                return (\n                    (codePoint >= 0x1F600 && codePoint <= 0x1F64F) || // Emoticons\n                    (codePoint >= 0x1F300 && codePoint <= 0x1F5FF) || // Miscellaneous Symbols and Pictographs\n                    (codePoint >= 0x1F680 && codePoint <= 0x1F6FF) || // Transport and Map Symbols\n                    (codePoint >= 0x1F700 && codePoint <= 0x1F77F) || // Alchemical Symbols\n                    (codePoint >= 0x1F780 && codePoint <= 0x1F7FF) || // Geometric Shapes Extended\n                    (codePoint >= 0x1F800 && codePoint <= 0x1F8FF) || // Supplemental Arrows-C\n                    (codePoint >= 0x1F900 && codePoint <= 0x1F9FF) || // Supplemental Symbols and Pictographs\n                    (codePoint >= 0x1FA00 && codePoint <= 0x1FA6F) || // Chess Symbols\n                    (codePoint >= 0x1FA70 && codePoint <= 0x1FAFF) || // Symbols and Pictographs Extended-A\n                    (codePoint >= 0x2600 && codePoint <= 0x26FF) ||   // Miscellaneous Symbols\n                    (codePoint >= 0x2700 && codePoint <= 0x27BF) ||   // Dingbats\n                    (codePoint >= 0x1F1E0 && codePoint <= 0x1F1FF) || // Regional Indicator Symbols (for flags)\n                    (codePoint >= 0x1F200 && codePoint <= 0x1F2FF) || // Enclosed CJK Letters and Months\n                    (codePoint >= 0x1F000 && codePoint <= 0x1F02F) || // Mahjong Tiles\n                    (codePoint >= 0x1F030 && codePoint <= 0x1F09F) || // Domino Tiles\n                    (codePoint >= 0x1F0A0 && codePoint <= 0x1F0FF) || // Playing Cards\n                    (codePoint >= 0x1F9A0 && codePoint <= 0x1F9FF) || // More Supplemental Symbols and Pictographs\n                    (codePoint >= 0x1FAD0 && codePoint <= 0x1FAD9) || // Skateboard\n                    (codePoint >= 0x1FAE0 && codePoint <= 0x1FAFF) || // Symbols and Pictographs Extended-B\n                    (codePoint >= 0x1FB00 && codePoint <= 0x1FBFF) || // Symbols for Legacy Computing\n                    (codePoint >= 0x1FC00 && codePoint <= 0x1FC9F) || // Ornamental Dingbats\n                    (codePoint >= 0x1FD00 && codePoint <= 0x1FDFF) || // Geometric Shapes Extended-A\n                    (codePoint >= 0x1FE00 && codePoint <= 0x1FEFF) || // Supplemental Punctuation\n                    (codePoint >= 0x1FF00 && codePoint <= 0x1FFFD)    // Symbols and Pictographs Extended-C\n                    // ... and potentially more ranges as new emoji are added\n                );\n            };\n\n            let classes = [];\n\n\n            if (section) {\n                classes.push(\n                    '.sectionname',\n                    '.sectionheading',\n                    '.sectionname > a',\n                    '[data-for=\"section_title\"].courseindex-link',\n                    'body[id^=\"page-course-view-section\"] .page-header-headings > h1');\n            }\n\n            if (activity) {\n                classes.push(\n                    '.instancename',\n                    '.instancename > a',\n                    '[data-for=\"cm_name\"].courseindex-link',\n                    'body[id^=\"page-mod\"] .page-header-headings > h1');\n            }\n\n            classes = classes.join(',');\n            $(document).ready(() => {\n                addNumIcon(classes);\n                const observer = new MutationObserver(() => {\n                    addNumIcon(classes);\n                });\n                observer.observe(document.querySelector('.courseindex'), { childList: true, subtree: true });\n            });\n\n        }\n    };\n});"],"names":["define","$","init","regex","breadcrumb","section","activity","addNumIcon","classes","document","querySelectorAll","forEach","el","match","innerText","trim","console","log","icon","groups","title","iconclass","isUnicodeEmoji","innerHTML","char","codePoint","codePointAt","push","join","ready","MutationObserver","observe","querySelector","childList","subtree"],"mappings":";;;;;;;;;AAyBAA,6BAAO,CAAC,WAAW,SAASC,SACjB,CACHC,KAAM,SAAUC,WAAOC,kEAAa,OAAQC,mEAAgBC,uEAClDC,WAAa,SAASC,SAEN,QAAdJ,aACAI,SAAW,kDAGfC,SAASC,iBAAiBF,SAASG,SAAQC,WACjCC,MAAQD,GAAGE,UAAUC,OAAOF,MAAMV,UACxCa,QAAQC,IAAIJ,OACRA,MAAO,KACHK,MAAQL,MAAMM,QAAUN,MAAMM,OAAOD,KAAOL,MAAMM,OAAOD,KAAOL,MAAM,IAAIE,OAC1EK,OAASP,MAAMM,QAAUN,MAAMM,OAAOC,MAAQP,MAAMM,OAAOC,MAAQP,MAAM,IAAIE,OAC7EM,UAAY,cAEZC,eAAeJ,QACfG,WAAa,kBAGjBT,GAAGW,sMAEoCF,uBAAcH,sKAGnCE,WAKR,QAAdhB,YACAK,SAASC,iBA5BW,iDA4BuBC,SAAQC,WACzCC,MAAQD,GAAGE,UAAUC,OAAOF,MAAMV,OACpCU,QACAD,GAAGE,UAAYD,MAAM,GAAGE,YAMlCO,eAAiB,SAASE,YACtBC,UAAYD,KAAKE,YAAY,UAE9BD,WAAa,QAAWA,WAAa,QACrCA,WAAa,QAAWA,WAAa,QACrCA,WAAa,QAAWA,WAAa,QACrCA,WAAa,QAAWA,WAAa,QACrCA,WAAa,QAAWA,WAAa,QACrCA,WAAa,QAAWA,WAAa,QACrCA,WAAa,QAAWA,WAAa,QACrCA,WAAa,QAAWA,WAAa,QACrCA,WAAa,QAAWA,WAAa,QACrCA,WAAa,MAAUA,WAAa,MACpCA,WAAa,MAAUA,WAAa,OACpCA,WAAa,QAAWA,WAAa,QACrCA,WAAa,QAAWA,WAAa,QACrCA,WAAa,QAAWA,WAAa,QACrCA,WAAa,QAAWA,WAAa,QACrCA,WAAa,QAAWA,WAAa,QACrCA,WAAa,QAAWA,WAAa,QACrCA,WAAa,QAAWA,WAAa,QACrCA,WAAa,QAAWA,WAAa,QACrCA,WAAa,QAAWA,WAAa,QACrCA,WAAa,QAAWA,WAAa,QACrCA,WAAa,QAAWA,WAAa,QACrCA,WAAa,QAAWA,WAAa,QACrCA,WAAa,QAAWA,WAAa,YAK1CjB,QAAU,GAGVH,SACAG,QAAQmB,KACJ,eACA,kBACA,mBACA,8CACA,mEAGJrB,UACAE,QAAQmB,KACJ,gBACA,oBACA,wCACA,mDAGRnB,QAAUA,QAAQoB,KAAK,KACvB3B,EAAEQ,UAAUoB,OAAM,KACdtB,WAAWC,SACM,IAAIsB,kBAAiB,KAClCvB,WAAWC,YAENuB,QAAQtB,SAASuB,cAAc,gBAAiB,CAAEC,WAAW,EAAMC,SAAS"}