{"version":3,"file":"index.min.js","sources":["../src/index.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Section number icon filter - A simple JS based filter to turn number into icon in section,course and activity title\n *\n * #package local_numicon\n * @copyright 2025 TuchSoft <https://tuchsoft.com>\n * @author Mattia Bonzi <mattia@tuchsoft.com>\n * @see https://tuchsoft.com/plugin/moodle/local_numicon <Documentations and tutorials>\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery'], function($) {\n    return {\n        init: function (regex, breadcrumb = 'hide', section = true, activity = false ) {\n            const addNumIcon = function(classes) {\n                const breadcrumbClass = '.breadcrumb-item > a, .breadcrumb-item > span';\n                if (breadcrumb == 'icon') {\n                    classes += ','+breadcrumbClass;\n                }\n\n                document.querySelectorAll(classes).forEach(el => {\n                    const match = el.innerText.trim().match(regex);\n                    if (match) {\n                        el.innerHTML = `<div class=\"text-center numicon-container\">\n                                            <div class=\"numicon-icon\">\n                                                <span class=\"numicon-num\">${match[1]}</span>\n                                            </div>\n                                        </div> \n                                        ${match[2] ? match[2].trim() : ''}`;\n                    }\n                });\n\n                //manage breadcrums\n                if (breadcrumb == 'hide') {\n                    document.querySelectorAll(breadcrumbClass).forEach(el => {\n                        const match = el.innerText.trim().match(regex);\n                        if (match) {\n                            el.innerText = match[2].trim();\n                        }\n                    });\n                }\n            };\n\n            let classes = [];\n\n            classes.push(\n                '.sectionname',\n                '.instancename',\n                '.sectionheading',\n                '[data-for=\"section_title\"].courseindex-link',\n                'body[id^=\"page-course-view-section\"] .page-header-headings > h1');\n\n            if (section) {\n                classes.push(\n                    '.sectionname',\n                    '.instancename',\n                    '.sectionheading',\n                    '[data-for=\"section_title\"].courseindex-link',\n                    'body[id^=\"page-course-view-section\"] .page-header-headings > h1');\n            }\n\n            if (activity) {\n                classes.push(\n                    '.instancename',\n                    '[data-for=\"cm_name\"].courseindex-link',\n                    'body[id^=\"page-mod\"] .page-header-headings > h1');\n            }\n\n            classes = classes.join(',');\n            $(document).ready(() => {\n                addNumIcon(classes);\n                const observer = new MutationObserver(() => {\n                    addNumIcon(classes);\n                });\n                observer.observe(document.querySelector('.courseindex'), { childList: true, subtree: true });\n            });\n\n        }\n    };\n});"],"names":["define","$","init","regex","breadcrumb","section","activity","addNumIcon","classes","document","querySelectorAll","forEach","el","match","innerText","trim","innerHTML","push","join","ready","MutationObserver","observe","querySelector","childList","subtree"],"mappings":";;;;;;;;;AAyBAA,6BAAO,CAAC,WAAW,SAASC,SACjB,CACHC,KAAM,SAAUC,WAAOC,kEAAa,OAAQC,mEAAgBC,uEAClDC,WAAa,SAASC,SAEN,QAAdJ,aACAI,SAAW,kDAGfC,SAASC,iBAAiBF,SAASG,SAAQC,WACjCC,MAAQD,GAAGE,UAAUC,OAAOF,MAAMV,OACpCU,QACAD,GAAGI,mNAEiDH,MAAM,oKAGxCA,MAAM,GAAKA,MAAM,GAAGE,OAAS,QAKrC,QAAdX,YACAK,SAASC,iBAnBW,iDAmBuBC,SAAQC,WACzCC,MAAQD,GAAGE,UAAUC,OAAOF,MAAMV,OACpCU,QACAD,GAAGE,UAAYD,MAAM,GAAGE,gBAMpCP,QAAU,GAEdA,QAAQS,KACJ,eACA,gBACA,kBACA,8CACA,mEAEAZ,SACAG,QAAQS,KACJ,eACA,gBACA,kBACA,8CACA,mEAGJX,UACAE,QAAQS,KACJ,gBACA,wCACA,mDAGRT,QAAUA,QAAQU,KAAK,KACvBjB,EAAEQ,UAAUU,OAAM,KACdZ,WAAWC,SACM,IAAIY,kBAAiB,KAClCb,WAAWC,YAENa,QAAQZ,SAASa,cAAc,gBAAiB,CAAEC,WAAW,EAAMC,SAAS"}